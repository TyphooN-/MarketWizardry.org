<!-- ai-musings.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarketWizardry.org | AI Musings</title>
    <style>
        .file-entry {
            padding: 10px;
            border: 1px solid #ccc;
            margin: 5px;
            cursor: pointer;
        }
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 80%; /* Could be more or less, depending on screen size */
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
<div id="fileGrid"></div>
<!-- Modal -->
<div id="textModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="currentFile">Current File</h2>
        <pre id="textContent"></pre>
    </div>
</div>
<script>
    const files = {
        1: 'monero_adoption.txt',
        2: 'financial_advice.txt',
        3: 'snoop_fire_spaghetti.txt',
        4: 'terry_davis_quest.txt',
        5: 'the_great_wall_showdown.txt',
        6: 'elon_antichrist.txt',
        7: 'gpu_inferno.txt',
        8: 'the_cost_of_pixels.txt',
        9: 'jensen_huang_goodguy.txt',
        10: 'ICT_1.txt',
        11: 'ICT_2.txt',
        12: 'nvidia_missing_ROPs.txt',
        13: 'nvidia_snake_oil.txt',
    };
    // Initialize file grid
    const fileGrid = document.getElementById('fileGrid');
    let maxFileNameWidth = 0;
    // Create temporary elements to measure widths
    const tempDiv = document.createElement('div');
    tempDiv.style.position = 'absolute';
    tempDiv.style.visibility = 'hidden';
    document.body.appendChild(tempDiv);
    // Function to calculate max width
    function calculateMaxWidth() {
        Object.values(files).forEach(fileName => {
            tempDiv.textContent = fileName;
            const width = tempDiv.offsetWidth;
            if (width > maxFileNameWidth) {
                maxFileNameWidth = width;
            }
        });
    }
    // Create file entries and measure widths
    Object.values(files).forEach((fileName, index) => {
        const fileEntry = document.createElement('div');
        fileEntry.classList.add('file-entry');
        fileEntry.textContent = fileName;
        tempDiv.textContent = fileName;
        maxFileNameWidth = Math.max(maxFileNameWidth, tempDiv.offsetWidth);
        // Add event listener to the file entry
        fileEntry.addEventListener('click', () => {
            loadFile(fileName);
        });
        fileGrid.appendChild(fileEntry);
    });
    document.body.removeChild(tempDiv);
    // Set grid width based on max file name width
    fileGrid.style.gridTemplateColumns = `repeat(auto-fill, ${maxFileNameWidth}px)`;
    // Function to load and display a file's content
    function loadFile(fileName) {
        fetch(`/${fileName}`)
            .then(response => response.text())
            .then(data => {
                document.getElementById('textContent').textContent = data;
                document.getElementById('currentFile').textContent = fileName;
                document.getElementById('textModal').style.display = 'block';
            })
            .catch(error => console.error('Error loading file:', error));
    }
    // Get the modal
    const modal = document.getElementById("textModal");
    // Get the <span> element that closes the modal
    const span = document.getElementsByClassName("close")[0];
    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
        modal.style.display = "none";
    }
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>
</body>
</html>
